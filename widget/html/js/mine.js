(window.webpackJsonp=window.webpackJsonp||[]).push([["mine"],{"1a01":function(t,n,i){"use strict";var e=i("939d"),s=i("d3c4").findIndex,o=(i=i("23ea"),"findIndex"),a=!0;o in[]&&Array(1)[o]((function(){a=!1})),e({target:"Array",proto:!0,forced:a},{findIndex:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}}),i(o)},"2b00":function(t,n,i){"use strict";i("5f55")},3992:function(t,n,i){"use strict";i.r(n),i("1a01"),i("e157"),i("7141");var e=i("f19b"),s=i.n(e),o=(e=i("e9cc"),i.n(e));e={name:"Mine",data:function(){return{list:[]}},created:function(){this.$bus.$off("global.rightClick").$on("global.rightClick",this.save)},mounted:function(){this.init()},methods:{init:function(){var t=this,n=this;o.a.getItem("MEI_HUA__mine").then((function(i){if(i)n.list=i;else try{t.api.readFile({path:"fs://meihua.json"},(function(t,i){t.status&&(t=JSON.parse(t.data||"[]"),n.list=t)}))}catch(i){n.$toast({msg:i,location:"middle"})}}))},getTime:function(t){return s()(t).format("YYYY-MM-DD HH:mm:ss")},goAnswer:function(t){var n=t.question,i=t.shangGuaCount,e=t.xiaGuaCount,s=t.dongYaoCount,o=t.timestamp;t=t.ganwu;this.$router.push({path:"/answer",query:{question:n,shangGuaCount:i,xiaGuaCount:e,dongYaoCount:s,timestamp:o,ganwu:t}})},toDelete:function(t){var n=this,i=this.list.findIndex((function(n){return n.timestamp===t.timestamp}));this.list.splice(i,1),this.toUpdate(this.list).then((function(){n.$toast({msg:"删除成功",location:"middle"})}))},toEdit:function(t){var n=this,i=this.list.findIndex((function(n){return n.timestamp===t.timestamp}));t.isEdit=!1,this.$set(this.list,i,t),this.toUpdate(this.list).then((function(){n.$toast({msg:"编辑成功",location:"middle"})}))},toUpdate:function(t){return o.a.setItem("MEI_HUA__mine",t).then((function(t){}))},save:function(){var n=this;if(0===this.list.length)return n.$toast({msg:"暂无数据",location:"middle"});try{this.api.writeFile({path:"fs://meihua.json",data:JSON.stringify(n.list)},(function(t,i){t.status?n.$toast({msg:"保存成功",location:"middle"}):n.$toast({msg:i.msg,location:"middle"})}))}catch(t){n.$toast({msg:t,location:"middle"})}}},onReady:function(){this.$toast({msg:"成功",location:"middle"}),this.save()}},i("2b00"),i=i("cba8"),i=Object(i.a)(e,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"Mine"},t._l(t.list,(function(n,e){return i("van-swipe-cell",{key:e,scopedSlots:t._u([{key:"left",fn:function(){return[i("van-button",{staticClass:"edit-button",attrs:{square:"",text:"编辑",type:"info"},on:{click:function(i){return t.$set(n,"isEdit",!0)}}})]},proxy:!0},{key:"right",fn:function(){return[i("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(i){return t.toDelete(n)}}})]},proxy:!0}],null,!0)},[n.isEdit?i("van-field",{attrs:{label:"",placeholder:"请输入问题"},on:{blur:function(i){return t.toEdit(n)}},model:{value:n.question,callback:function(i){t.$set(n,"question",i)},expression:"item.question"}}):i("van-cell",{attrs:{title:n.question,label:t.getTime(n.timestamp),value:n.zhigua,"is-link":""},on:{click:function(i){return t.goAnswer(n)}}})],1)})),1)}),[],!1,null,null,null);n.default=i.exports},"5f55":function(t,n,i){},adb6:function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}}]);